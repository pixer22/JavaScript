<html><head>

    <title>Игра Блэк Джек</title>

    <script language="JavaScript">
        <!--

        var iCompScore, iGamerScore, CompCard, GamerCard, iComp, iGamer, Game
        var CardFlag=new Array(53)

        function GameInit()
        {

            Game=0;
            document.forms.main.info.value="Нажмите кнопку 'Новая игра'";
            for(i=1;i<=52;i++) CardFlag=0;

        }

        function PickACard()
        {

            var nCard;
            while(CardFlag[nCard=Math.round(Math.random()*51)+1]);
            CardFlag[nCard]=1;
            return nCard;

        }

        function CardValue(n)
        {

            if(n<=36)
                s=parseInt((n-1)/4)+2;
            else if(n<=48)
                s=10;
            else
                s=11;

            return s;

        }

        function NewGame()
        {

            var s;

            if(Game) return;

            Game=1;
            iComp=1; iGamer=11;
            iCompScore=0; iGamerScore=0;

            for(i=1;i<20;i++) document.images[i].src="card000.gif";

            document.forms.main.info.value="Идет игра";

            CompCard=PickACard();
            if(CompCard<=9) s="card00"; else s="card0";
            document.images[iComp].src=s+CompCard+".gif";
            iCompScore+=CardValue(CompCard);
            document.forms.CompScore[0].value=iCompScore;
            iComp++;

            GamerCard=PickACard();
            if(GamerCard<=9) s="card00"; else s="card0";
            document.images[iGamer].src=s+GamerCard+".gif";
            iGamerScore+=CardValue(GamerCard);
            document.forms.GamerScore[0].value=iGamerScore;
            iGamer++;

        }

        function GamerPickMore()
        {

            if(!Game)
            {
                document.forms.main.info.value="Нажмите кнопку 'Новая игра'";
                return;
            }

            GamerCard=PickACard();
            if(GamerCard<=9) s="card00"; else s="card0";
            document.images[iGamer].src=s+GamerCard+".gif";
            iGamerScore+=CardValue(GamerCard);
            document.forms.GamerScore[0].value=iGamerScore;
            iGamer++;

            if(iGamerScore>21)
            {
                document.forms.main.info.value="Перебор, Вы програли!";
                Game=0;
            }

        }

        function CompPicks()
        {

            if(!Game)
            {
                document.forms.main.info.value="Нажмите кнопку 'Новая игра'";
                return;
            }

            while(iCompScore<17)
            {
                CompCard=PickACard();
                if(CompCard<=9) s="card00"; else s="card0";
                document.images[iComp].src=s+CompCard+".gif";
                iCompScore+=CardValue(CompCard);
                document.forms.CompScore[0].value=iCompScore;
                iComp++;
            }

            LookAtHands();

        }

        function LookAtHands()
        {

            if(iCompScore<=21 && iCompScore>=iGamerScore)
                document.forms.main.info.value="Вы проиграли!";
            else
                document.forms.main.info.value="Вы выиграли!";

            Game=0;

        }

        //-->
    </script>

</head>

<body onload="GameInit()">

<h1>Игра Блэк Джек</h1>

<script language="JavaScript">
    <!--

    for(i=1;i<=10;i++)
        document.write('<img src="card000.gif" width="71" height="96">')

    //-->
</script><img src="card000.gif" width="71" height="96"><img src="card000.gif" width="71" height="96"><img src="card000.gif" width="71" height="96"><img src="card000.gif" width="71" height="96"><img src="card000.gif" width="71" height="96"><img src="card000.gif" width="71" height="96"><img src="card000.gif" width="71" height="96"><img src="card000.gif" width="71" height="96"><img src="card000.gif" width="71" height="96"><img src="card000.gif" width="71" height="96">

<form name="CompScore">
    Очки: <input type="text" value="0">
</form>

<br>

<script language="JavaScript">
    <!--

    for(i=1;i<=10;i++)
        document.write('<img src="card000.gif" width="71" height="96">')

    //-->
</script><img src="card000.gif" width="71" height="96"><img src="card000.gif" width="71" height="96"><img src="card000.gif" width="71" height="96"><img src="card000.gif" width="71" height="96"><img src="card000.gif" width="71" height="96"><img src="card000.gif" width="71" height="96"><img src="card000.gif" width="71" height="96"><img src="card000.gif" width="71" height="96"><img src="card000.gif" width="71" height="96"><img src="card000.gif" width="71" height="96">



<form name="GamerScore">
    Очки: <input type="text" value="0">
</form>

<form name="main">
    <input type="button" value="Новая игра" onclick="NewGame()">
    <input type="button" value="Еще" onclick="GamerPickMore()">
    <input type="button" value="Хватит" onclick="CompPicks()">
    <input type="text" value="" maxlength="30" size="30" name="info">
</form>

<script language="JavaScript">
    <!--
    //-->
</script>



</body></html>