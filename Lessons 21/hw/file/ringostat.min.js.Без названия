var rngUrls=function(){var t={backend:"https://ringostat.com/",api:"https://api.ringostat.com/",analytics:"https://analytics.ringostat.net/",substitution:"https://substitution.ringostat.net/"};return t}();
!function(e){"use strict";var t={isMobile:function(){return/iphone|ipod|android|ie|blackberry|fennec/.test(navigator.userAgent.toLowerCase())}(),log:function(e){"#debug_ringostat_script"===window.location.hash&&window.console&&console.log(e)},sendRequest:function(e,n,a,o){var i="onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest,r=new i;r.open("POST",e,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.onload=a,r.onerror=o,r.send(t.objectToQueryString(n))},addEvents:function(e,t,n){for(var a=t.length;a--;)e.addEventListener(t[a],n,!1)},maskString:function(e,t){for(var n=t.toString().split(""),a=e.toString().split(""),o=n.length;o--;)a.lastIndexOf("#")!==-1&&(a[a.lastIndexOf("#")]=n[+o]);return a.join("").replace(/#/g,"")},getLocale:function(){var e=document.documentElement.lang||navigator&&navigator.language;return e.split("-")[0]},deepExtend:function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e||(e={}),e[a]&&"object"==typeof n[a]?t.deepExtend(e[a],n[a]):e[a]=n[a]);return e},objectToQueryString:function(e){function t(e,n,a){var o,i,r,s;if(s=/\[\]$/,n instanceof Array)for(i=0,r=n.length;i<r;i++)s.test(e)?a(e,n[i]):t(e+"["+("object"==typeof n[i]?i:"")+"]",n[i],a);else if("object"==typeof n)for(o in n)t(e+"["+o+"]",n[o],a);else a(e,n)}var n,a,o,i,r,s;if(a=[],r=/%20/g,o=function(e,t){t="function"==typeof t?t():null==t?"":t,a[a.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)},e instanceof Array)for(i in e)o(i,e[i]);else for(n in e)t(n,e[n],o);return s=a.join("&").replace(r,"+")},fadeIn:function(e){e.style.opacity=0,e.style.display="block",function t(){var n=parseFloat(e.style.opacity);(n+=.1)>1||(e.style.opacity=n,requestAnimationFrame(t))}()},fadeOut:function(e,t){var n=300,a=1,o=setInterval(function(){a-=10/n,a<=0&&(clearInterval(o),a=0,e.style.display="none",e.style.visibility="hidden","function"==typeof t&&t()),e.style.opacity=a,e.style.filter="alpha(opacity="+100*a+")"},10)},addClass:function(e,t){e.className+=" "+t},removeClass:function(e,t){e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},parseUrl:function(e){var t=document.createElement("a");return t.href=e,t},throttle:function(e,t){function n(){return i?(a=arguments,void(o=this)):(e.apply(this,arguments),i=!0,void setTimeout(function(){i=!1,a&&(n.apply(o,a),a=o=null)},t))}var a,o,i=!1;return n}},n={callback:null,interval:null,achieveTime:0,guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}(),init:function(e,a){n.callback=a,n.achieveTime=e;var o={guid:"",achiev:0},i=n.readFromStorage();if(i&&i.achiev){if(i.achiev===-1){if(!l.isLanding)return;i.achiev=0}o.achiev=i.achiev}n.writeToStorage(o);var r=["mousedown","mouseup","mousemove","touchstart","touchmove","touchend","keydown","keyup"];t.addEvents(document,r,t.throttle(n.eventFired,500)),null===n.interval&&(n.interval=setInterval(function(){(i=n.readFromStorage())&&i.guid===n.guid&&(i.achiev>=n.achieveTime||i.achiev===-1?(clearInterval(n.interval),n.writeToStorage({guid:"",achiev:-1}),n.callback()):n.writeToStorage({guid:"",achiev:i.achiev+10}))},1e4))},eventFired:function(){var e=n.readFromStorage();e&&(e.guid=n.guid,n.writeToStorage(e))},writeToStorage:function(e){var t={value:e,expires_at:(new Date).getTime()+18e5};localStorage.setItem("rngst_action",JSON.stringify(t))},readFromStorage:function(){var e=JSON.parse(localStorage.getItem("rngst_action"));if(null!==e){if(!(null!==e.expires_at&&e.expires_at<(new Date).getTime()))return e.value;localStorage.removeItem("rngst_action")}return null}},a={cookieDomain:"",createCookie:function(e,t,n,a){document.cookie=e+"="+encodeURIComponent(JSON.stringify(t))+"; expires="+new Date(Date.now()+1e3*n).toUTCString()+"; path=/"+(a?"; domain="+a:"")},readCookie:function(e){var t=document.cookie.match(new RegExp("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)"));return t?JSON.parse(decodeURIComponent(t.pop())):null},eraseCookie:function(e,t){a.createCookie(e,"",-1,t)},refreshCookie:function(e,t,n){a.createCookie(e,a.readCookie(e),t,n)}};a.CookieTLD=function(){for(var e=document.cookie,t=document.location.hostname.split("."),n=t.length;n--;){var o="."+t.slice(n).join(".");if(a.createCookie("CookieTLD",o,30,o),e!==document.cookie)return a.eraseCookie("CookieTLD",o),o}}()||"";var o=function(e){this.uaId=e.uaId,this.referrer=document.referrer,this.clientId=e.clientId,this.currentUrl=window.location.href,this.crossDomain=e.crossDomain||!1,this.cookieLifeTime=e.cookieLifeTime||300,this.referrerHost=t.parseUrl(document.referrer).hostname,this.currentHost=t.parseUrl(window.location.href).host,this.isLanding=!0,this.utmz=null,this.numbers=null,this.projectHash=null,this.getAdditionalData=function(){return void 0!==window.ringostat_additional_data?window.ringostat_additional_data:a.readCookie("ringostat_additional_data")},this.getNumbers=function(n){var o=Object.getOwnPropertyNames(e.numbers),i=o.length>1||o.indexOf("common")===-1;i||(o=null),t.sendRequest(rngUrls.substitution+"api/getChangedNumber/",{"data[current_url]":this.currentUrl,"data[referrer]":this.referrer,"data[client_id]":this.clientId,"data[cookie]":a.readCookie("rngst2"),"data[ua_id]":this.uaId,"data[new]":!0,"data[user_region][]":o,"data[force_region]":i},n,function(){t.log("getChangedNumber Error : "+this.status+" - "+this.statusText)})},this.setNumbers=function(n,a){t.deepExtend(this.numbers,e.numbers);var o;for(var i in this.numbers)if(this.numbers.hasOwnProperty(i)){var r=document.getElementsByClassName(this.numbers[i]["class"]),s=r.length;if(this.numbers[i].number){var l=t.maskString(this.numbers[i].mask.replace("<t>",this.numbers[i].number),this.numbers[i].number);for(this.numbers[i].maskedNumber=l;s--;)r[s].innerHTML=l;o=!0}}"function"==typeof n&&n(),e.callbackFunctionBehavior&&!o||"function"==typeof a&&a(this.numbers)},this.recordVisit=function(){for(var n in this.numbers)this.numbers.hasOwnProperty(n)&&t.sendRequest(rngUrls.analytics+"collect/old",{"data[current_url]":this.currentUrl,"data[referrer]":this.referrer,"data[client_id]":this.clientId,"data[date]":Date.now(),"data[number]":this.numbers[n].number,"data[cookie]":a.readCookie("rngst2"),"data[ua_id]":this.uaId,"data[roistat_visit]":e.roistatTracking?a.readCookie("roistat_visit"):null,"data[user_agent]":window.navigator.userAgent,"data[additional_data]":this.getAdditionalData(),"data[page_title]":document.title,"data[domain_tld]":a.CookieTLD},function(){t.log("recordVisit Success : "+this.status+" - "+this.statusText)},function(){t.log("recordVisit Error : "+this.status+" - "+this.statusText)})},this.getCrossDomainCookies=function(){this.iframe.onload=function(){this.contentWindow.postMessage({messageType:"getCookies",ua_id:l.uaId},"*")};var e=function(e){var t=e.data;"setCookies"===t.messageType&&(a.createCookie("rngst1",t.rngst1,l.cookieLifeTime,a.cookieDomain),a.createCookie("rngst2",t.rngst2,l.cookieLifeTime,a.cookieDomain),s())};t.addEvents(window,["message"],e)},this.setCrossDomainCookies=function(){this.iframe.contentWindow.postMessage({messageType:"setCookiesToChild",ua_id:l.uaId,cookies:{rngst1:a.readCookie("rngst1"),rngst2:a.readCookie("rngst2")}},"*")}},i={old_data:null,language:t.getLocale(),formType:null,form:null,button:null,icon:null,overlay:null,formStatus:"hidden",buttonStatus:"hidden",iframeDocument:null,setCallbackSettings:function(n){e.callbackSettings=t.deepExtend({CallbackOffOnPage:!1,autoFormOffOnPage:!1,CallbackOff:!1,autoFormOff:!1,delay:0},n),i.check()},hideButton:function(){var e=document.getElementsByClassName("rngst_phone_button")[0];e&&document.body.removeChild(e)},stopTimer:function(){n.callback=function(){},n.writeToStorage({achiev:-1})},freezeTimer:function(){clearTimeout(n.interval)},check:function(){return e.callbackSettings.CallbackOff?(i.hideButton(),i.stopTimer(),void a.createCookie("rngst_callback",{callbackNumber:!1},1800,a.cookieDomain)):e.callbackSettings.CallbackOffOnPage?(i.hideButton(),void i.freezeTimer()):void(a.readCookie("rngst_callback")?(i.old_data=a.readCookie("rngst_callback"),i.old_data.callbackNumber?i.init():t.log("No callback number")):t.sendRequest(rngUrls.substitution+"api/checkCallback/",{"data[ua_id]":l.uaId,"data[utmz]":l.utmz},function(){i.old_data=JSON.parse(this.responseText),a.createCookie("rngst_callback",i.old_data,1800,a.cookieDomain),i.old_data.callbackNumber?i.init():t.log("No callback number"),t.log("checkCallback  Success : "+this.status+" - "+this.statusText)},function(){t.log("checkCallback  Error : "+this.status+" - "+this.statusText)}))},init:function(){if(!i.old_data.is_working_time)return a.eraseCookie("rngst_callback",a.cookieDomain),void t.log("Out of working hours");if(e.callbackSettings.delay&&(i.old_data.avg_time_to_call=+i.old_data.avg_time_to_call+e.callbackSettings.delay,a.createCookie("rngst_callback",i.old_data,1800,a.cookieDomain)),i.old_data.language=i.language,0===document.getElementsByClassName("rngst_phone_button").length){var o=document.getElementsByTagName("head")[0],r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.href=rngUrls.substitution+"api/getCallbackButtonCSS/?ua_id="+l.uaId,o.appendChild(r),document.body.insertAdjacentHTML("beforeend",'<div class="rngst_phone_button"><div class="rngst_phone_icon"></div><div class="rngst_phone_circle"></div><div class="rngst_phone_circle2"></div><div class="rngst_phone_fill"></div><div class="rngst_phone_body"></div></div>'),i.button=document.getElementsByClassName("rngst_phone_button")[0],i.icon=document.getElementsByClassName("rngst_phone_icon")[0],t.addEvents(i.icon,["mousedown","click"],function(e){("click"===e.type||"mousedown"===e.type&&!e.isTrusted)&&(i.old_data.form_type="forced",i.button.style.display="none",i.stopTimer(),i.callbackForm())}),t.addEvents(i.button,["mousedown","mouseup","touchstart","touchend","keydown","keyup","click","contextmenu","dblclick"],function(e){e.stopPropagation()})}return e.callbackSettings.autoFormOffOnPage?void i.freezeTimer():e.callbackSettings.autoFormOffOnPage?void i.stopTimer():(n.init(i.old_data.avg_time_to_call,function(){i.old_data.form_type="default",i.button.style.display="none",i.callbackForm()}),void(e.callbackSettings.autoFormOff&&i.stopTimer()))},callbackForm:function(){t.sendRequest(rngUrls.substitution+"api/getCallbackForm/",{"data[ua_id]":l.uaId,"data[form_type]":i.old_data.form_type,"data[language]":i.old_data.language},function(){function e(){t.fadeOut(i.overlay),t.fadeOut(i.form,function(){a.parentNode.removeChild(a),i.button.style.display="block"}),i.callbackLog(0)}var n=document.createElement("iframe"),a=document.createElement("div"),o=t.isMobile?"allowDropdown: false,":"";n.src="",n.title="title",n.setAttribute("name","name"),n.setAttribute("id","id"),n.setAttribute("frameborder","no"),(n.frameElement||n).style.cssText="width: 100%; height: 100%; border: 0; display: block;",a.style.cssText="width: 100%; height: 100%; position: fixed; top: 0; left: 0; z-index: 9999999;",a.setAttribute("id","wrapper_id"),a.appendChild(n);var r=document.body.lastChild;r.parentNode.insertBefore(a,r.nextSibling),i.iframeDocument=n.contentWindow.document,i.iframeDocument.write(this.responseText),i.iframeDocument.close();var s=this.responseText.match(new RegExp('<span class="hide" id="rngst_form_design">(.*)</span>'))[1],l=["choko","dark","light","milk"],c=document.createElement("link");c.rel="stylesheet",c.type="text/css",l.indexOf(s)===-1?c.href=rngUrls.backend+"callback/css/callback.css":c.href=rngUrls.backend+"callback/css/callback_"+s+".css";var u=document.createElement("link");u.id="intlLink",u.rel="stylesheet",u.type="text/css",u.href=rngUrls.backend+"static/js/vendors/phone_input/css/intlTelInput.css";var d=document.createElement("script");d.type="text/javascript",d.src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js",d.async=!1;var m=document.createElement("script");m.type="text/javascript",m.src=rngUrls.backend+"static/js/vendors/phone_input/js/intlTelInput.js",m.async=!1;var g=document.createElement("script");g.type="text/javascript",g.text='$("#rngst_phone_input").intlTelInput({    utilsScript: "'+rngUrls.backend+'static/js/vendors/phone_input/utils.js",    defaultCountry: "auto",    initialCountry: "auto",    autoPlaceholder: true,'+o+'    nationalMode: false,    autoHideDialCode: false,    preferredCountries: ["ua", "ru"],    geoIpLookup: function(callback) {    $.get("'+rngUrls.api+'ipinfo", function() {}, "json").always(function(resp) {        var countryCode = (resp && resp.country) ? resp.country : "";        callback(countryCode);    });}});$(window).trigger("load");$("#rngst_phone_input").keydown(function() {    $(".rngst_error_text").addClass("hide");});$("#rngst_send_callback").on("keypress click touchstart", function (e) {        e.preventDefault();        if (!(e.type === "keypress" && e.which !== 13)) {            if ($.trim($("#rngst_phone_input").val())) {                if ($("#rngst_phone_input").intlTelInput("isValidNumber")) {                    var message = {                        num_to_call: $("#rngst_phone_input").intlTelInput("getNumber"),                       messageType: "transmitNumToCall"                    };                    parent.postMessage(message, "*");                } else {                    $(".rngst_error_text").removeClass("hide");                }            }        }    });',g.async=!1,d.onload=function(){i.iframeDocument.head.appendChild(m)},m.onload=function(){i.iframeDocument.head.appendChild(g)},i.iframeDocument.head.appendChild(c),i.iframeDocument.head.appendChild(u),i.iframeDocument.head.appendChild(d),i.overlay=i.iframeDocument.body.firstElementChild,i.form=i.iframeDocument.body.lastElementChild,i.overlay.style.display="block",i.form.style.display="block",i.form.style.top="20%",t.fadeIn(i.overlay),t.fadeIn(i.form),i.callbackLog(1),t.addEvents(i.iframeDocument.getElementById("rngst_close"),["mousedown","touchstart","keydown"],e),t.addEvents(i.iframeDocument.getElementById("rngst_overlay"),["mousedown","touchstart","keydown"],e),t.addEvents(window,["message"],i.initiateCall),t.log("getCallbackForm  Success : "+this.status+" - "+this.statusText)},function(){t.log("getCallbackForm  Error : "+this.status+" - "+this.statusText)})},callbackLog:function(e){t.sendRequest(rngUrls.analytics+"callback_form/v1",{"data[ua_id]":l.uaId,"data[client_id]":l.clientId,"data[avg_time_to_call]":i.old_data.avg_time_to_call,"data[flag]":e},function(){t.log("callbackLog  Success : "+this.status+" - "+this.statusText)},function(){t.log("callbackLog  Error : "+this.status+" - "+this.statusText)})},initiateCall:function(e){var n=e.data;if("transmitNumToCall"===n.messageType){n.num_to_call=n.num_to_call.replace(/^(380|\+380)0/,"$1"),n.num_to_call=n.num_to_call.replace(/^(7|\+7)8/,"$1"),t.sendRequest(rngUrls.substitution+"api/initiateCallback/",{"data[num_to_call]":n.num_to_call,"data[ua_id]":l.uaId,"data[client_id]":l.clientId,"data[utmz]":l.utmz,"data[avg_time_to_call]":i.old_data.avg_time_to_call,"data[page_url]":l.currentUrl},function(){t.log("initiateCallback  Success : "+this.status+" - "+this.statusText)},function(){t.log("initiateCallback  Error : "+this.status+" - "+this.statusText)}),i.form.removeChild(i.iframeDocument.getElementById("rngst_callback_form")),t.addClass(i.iframeDocument.getElementsByClassName("rngst_before_text")[0],"hide"),t.removeClass(i.iframeDocument.getElementsByClassName("rngst_counter_text")[0],"hide");var a=30,o=window.setInterval(function(){i.iframeDocument.getElementById("rngst_timer").innerHTML=a.toFixed(2),a<=0&&(i.iframeDocument.getElementById("rngst_timer").innerHTML="",t.addClass(i.iframeDocument.getElementsByClassName("rngst_counter_text")[0],"hide"),t.removeClass(i.iframeDocument.getElementsByClassName("rngst_after_text")[0],"hide"),clearInterval(o)),a-=.01},10);t.addEvents(i.iframeDocument.getElementById("rngst_close"),["mousedown","touchstart","keydown"],function(){clearInterval(o)}),t.addEvents(i.iframeDocument.getElementById("rngst_overlay"),["mousedown","touchstart","keydown"],function(){clearInterval(o)})}}},r=function(){if(l=new o(e),t.log("ringostat :"),t.log(l),e.subDomain&&(a.cookieDomain=e.subDomain),l.crossDomain)l.isLanding=e.linkedDomains instanceof Array&&e.linkedDomains.indexOf(l.referrerHost)===-1,l.iframe=document.createElement("iframe"),l.iframe.style.display="none",l.iframe.setAttribute("src","//cookie.ringostat.net/rngst_cookie_new.html"),document.body.appendChild(l.iframe),l.getCrossDomainCookies();else{var n=new RegExp(a.CookieTLD.replace(/\./g,"\\$&")+"$");l.isLanding=!(n.test(l.referrerHost)||n.test("."+l.referrerHost)||l.currentHost===l.referrerHost),s()}},s=function(){var n=function(){i.check(),l.recordVisit(),l.crossDomain&&l.setCrossDomainCookies()},o=a.readCookie("rngst1");o&&!l.isLanding?(a.refreshCookie("rngst1",l.cookieLifeTime,a.cookieDomain),l.numbers=o.numbers,l.utmz=a.readCookie("rngst2")&&a.readCookie("rngst2").utmz,l.setNumbers(n,e.callbackFunction)):l.getNumbers(function(){var o=JSON.parse(this.responseText);l.numbers=o.numbers,l.utmz=o.utmz,l.projectHash=o.projectHash;var i={numbers:o.numbers},r={utmz:o.utmz,session_level:o.session_level};a.createCookie("rngst1",i,l.cookieLifeTime,a.cookieDomain),a.createCookie("rngst2",r,31536e3,a.cookieDomain),t.log("getChangedNumber Success : "+this.status+" - "+this.statusText),l.setNumbers(n,e.callbackFunction)})},l=null,c={cookieLifeTime:300,crossDomain:!1,linkedDomains:[""],numbers:{},callbackFunction:function(){t.log("default callbackFunction")},subDomain:!1,callbackSettings:{CallbackOffOnPage:!1,autoFormOffOnPage:!1,CallbackOff:!1,autoFormOff:!1,delay:0},roistatTracking:!1,callbackFunctionBehavior:!1},u=JSON.parse(JSON.stringify(c));e=t.deepExtend(u,e),t.log("config :"),t.log(e),ga(function(t){e.uaId=e.uaId||ga.getAll()[0].get("trackingId"),e.clientId=ga.getAll()[0].get("clientId"),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",r,!1):r()}),window.ringostatAPI={},window.ringostatAPI.setCallbackSettings=function(e){i.setCallbackSettings(e)},window.ringostatAPI.restartRingostat=function(){var n=JSON.parse(JSON.stringify(c)),a=t.deepExtend(n,window.ringostatConfig);a.uaId=e.uaId,a.clientId=e.clientId,e=a,r()}}(window.ringostatConfig);