<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <style>
        @import 'css/screen.css';
        @import 'css/bootstrap.min.css';
        @import 'css/font-awesome.min.css';
        @import 'css/style.css';
    </style>
</head>
<body>
<div class="allWrapper"></div>
<header class="headerAll">
    <div class="container-fluid">
        <div class="container">
            <div class="row">
                <div class="header">
                    <div class="col-lg-3 logo">
                        <h1>
                            <a href="#" class="logoLink">
                                <span class="bigRed">P</span>
                                <span>o</span>
                                <span class="bigRed">K</span>
                                <span>e</span>
                                <span class="bigRed">R</span>
                                <span>MD</span>
                            </a>
                        </h1>
                    </div>
                    <div class="col-lg-4 col-lg-offset-5 registration">
                        <form action="" class="formLogin">
                            <button class="login">Log In</button>
                            <button class="registration"> Registration</button>
                        </form>
                    </div>
                    <div class="clearfix"></div>
                    <div class="col-lg-12 statistics">
                        <div class="numberPlayers col-lg-3">
                            <h4 class="titlesPlayers">Количество играющих:</h4>
                            <i class="fa fa-user-circle" aria-hidden="true"></i>
                            <span class="numberPlayersText">451</span>
                        </div>
                        <div class="numberPlayersIn col-lg-3">
                            <h4 class="titlesPlayers">Количество игроков:</h4>
                            <i class="fa fa-user-circle" aria-hidden="true"></i>
                            <span class="numberPlayersText">4514</span>
                        </div>
                        <div class="numberRooms col-lg-3">
                            <h4 class="titlesPlayers">Количество комнат:</h4>
                            <i class="fa fa-home" aria-hidden="true"></i>
                            <span class="numberPlayersText">52</span>
                        </div>
                        <div class="numberGamesOut col-lg-3">
                            <h4 class="titlesPlayers">Количество сыграных игр:</h4>
                            <i class="fa fa-university" aria-hidden="true"></i>
                            <span class="numberPlayersText">45167</span>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>
        <div class="navHeaderAll">
            <div class="container">
                <ul class="navs">
                    <li class="activeLink">
                        <a href="#">Главная</a>
                    </li>
                    <li>
                        <a href="#">Личный кабинет</a>
                    </li>
                    <li>
                        <a href="#">Турниры</a>
                    </li>
                    <li>
                        <a href="#">Статистика</a>
                    </li>
                    <li>
                        <a href="#">Правила</a>
                    </li>
                    <li>
                        <a href="#">Об игре</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</header>
<main class="mainAllBg">
    <div class="container-fluid">
        <div class="container">
            <div class="row">
                <div class="mainAll">
                    <div class="mainTopPcBlock"></div>
                    <a href="#" class="buttonGamesOn">Играть сейчас</a>
                    <!--<div class="gamesRoomIndex">-->
                        <!--<ul class="roomForIndex">-->
                            <!--<li>-->
                                <!--<p class="roomNumber">№ <span>1</span></p>-->
                            <!--</li>-->
                            <!--<li></li>-->
                            <!--<li></li>-->
                            <!--<li></li>-->
                            <!--<li></li>-->
                        <!--</ul>-->
                    <!--</div>-->
                    <div class="pokerInfo">
                        <h3 class="pokerInfoTitles">Техасский холдем</h3>
                        <p>Городок Робстаун в Техасе принято считать
                            официальным местом появления холдема.
                            После появления холдема и его распространения
                            по Техасу в 1967 году игра появилась
                            в Лас-Вегасе. Игру в Лас-Вегас привезли такие
                            знаменитые в Техасе игроки, как Дойл Брансон,
                            Амарилло Слим и Кренделл Аддингтон.</p>
                        <p>Аддингтон говорил, что впервые увидел, как
                            играли в холдем, в конце 60-х. В те
                            времена игру ещё не называли Техасский
                            Холдем, а просто Холдем.</p>
                        <p>В Европу техасский холдем несколько позднее
                            привезли Лиам Флад и Терри Роджерс.</p>
                        <p>В течение нескольких лет в эту игру можно было
                            сыграть лишь в одном единственном
                            казино в Вегасе — в «Голден Наггет Казино».</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
<footer class="allFooterBg">
    <div class="container-fluid">
        <div class="container">
            <div class="row">
                <div class="allFooter">
                    <div class="col-lg-3 footerLogo">
                        <h1>
                            <a href="#" class="logoLink">
                                <span class="bigRed">P</span>
                                <span>o</span>
                                <span class="bigRed">K</span>
                                <span>e</span>
                                <span class="bigRed">R</span>
                                <span>MD</span>
                            </a>
                        </h1>
                    </div>
                    <div class="col-lg-3 col-lg-offset-6">
                        <ul class="footerMenu">
                            <li class="activeLink">
                                <a href="#">Главная</a>
                            </li>
                            <li>
                                <a href="#">Личный кабинет</a>
                            </li>
                            <li>
                                <a href="#">Турниры</a>
                            </li>
                            <li>
                                <a href="#">Статистика</a>
                            </li>
                            <li>
                                <a href="#">Правила</a>
                            </li>
                            <li>
                                <a href="#">Об игре</a>
                            </li>
                        </ul>
                    </div>
                    <div class="clearfix"></div>
                    <div class="createdBlock">
                        <h1>Created by MD</h1>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
<script src="js/bootstrap.min.js"></script>
<script src="js/common.js"></script>
</body>
</html>


<script>
    //var roomno = 1;
    io.on('connection', function(socket){
        //if(io.nsps['/'].adapter.rooms["room-"+roomno] && io.nsps['/'].adapter.rooms["room-"+roomno].length > 1)
        //roomno++;
        //socket.join("room-"+roomno);


        //io.sockets.in("room-"+roomno).emit('connectToRoom', "You are in room no. "+roomno);


        // when the client emits 'adduser', this listens and executes
        socket.on('adduser', function(username){
            console.log('users')
            // store the username in the socket session for this client
            socket.username = username;
            // store the room name in the socket session for this client
            socket.room = 'room1';
            // add the client's username to the global list
            usernames[username] = username;
            // send client to room 1
            socket.join('room1');
            // echo to client they've connected
            socket.emit('updatechat', 'SERVER', 'you have connected to room1');
            // echo to room 1 that a person has connected to their room
            socket.broadcast.to('room1').emit('updatechat', 'SERVER', username + ' has connected to this room');
            socket.emit('updaterooms', rooms, 'room1');
        });

        socket.on('sendchat', function (data) {
            // we tell the client to execute 'updatechat' with 2 parameters
            io.sockets.in(socket.room).emit('updatechat', socket.username, data);
        });


//----------------------------------------------------------------------------------------------------------------------
//             socket.on('user this chat', function (nick) {
//                 socket.broadcast.emit('user connection', nick);
//             });

        socket.on('chat message', function(msg, idUserMess){
            User.findOne({_id:idUserMess}, function (err, users) {
                var nowUserNick;
                if(users.local.nick === null || users.local.nick === undefined) {
                    nowUserNick = 'User not name';
                } else {
                    nowUserNick = users.local.nick;
                }
                // io.emit('chat message', msg, nowUserNick);
                io.sockets.in(socket.room).emit('updatechat', msg , socket.username);
                console.log(socket.room)
                // io.emit('chat message', msg, nowUserNick);
            });

        });

        socket.on('chat message change', function (flag, nameUserMess) {
            socket.broadcast.emit('typing user', nameUserMess)
        });
        socket.on('disconnect', function(){
            console.log('user disconnected');
        });
        socket.on('added id user', function (data) {
            // console.log((data))
        })

    });
</script>











<%for(var i = 0; i < list.length; i++){%>
<li><%=list[i].user%></li>
<%}%>