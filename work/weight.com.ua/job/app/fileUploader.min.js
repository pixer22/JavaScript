define("fileUploader/utils/uploadFilesToMediaPlatform",["coreUtils"],function(){"use strict";function a(a,b,c){var d="picture";var e=new FormData;e.set("upload_token",b);e.set("media_type",d);e.append("file",a);e.append("siteMediaToken",b);var f=new XMLHttpRequest;f.onreadystatechange=function(){if(f.readyState===XMLHttpRequest.DONE){return f.response}};f.open("POST",c);f.send(e)}function b(b,c){c="APP "+c;var d=new XMLHttpRequest;d.onreadystatechange=function(){if(d.readyState===XMLHttpRequest.DONE){var c=JSON.parse(d.response);if(!c.error_code){a(b,c.upload_token,c.upload_url)}}};d.open("GET","https://files.wix.com/files/upload/url?media_type=picture");d.setRequestHeader("Authorization",c);d.setRequestHeader("Accept","application/json");d.setRequestHeader("Content-Type","application/json");d.send(null)}return{upload:b}});define("fileUploader",["santaProps","lodash","core","siteButton","fileUploader/utils/uploadFilesToMediaPlatform"],function(a,b,c,d,e){"use strict";var f=c.compMixins;var g=a.Types;return{displayName:"FileUploader",statics:{useSantaTypes:true},propTypes:b.assign({siteMediaToken:g.RendererModel.siteMediaToken.isRequired},a.santaTypesUtils.getSantaTypesByDefinition(d)),mixins:[f.skinBasedComp],createChooseFileButton:function(a){var b={label:"Choose File",id:"choose-file-button"};var c={skinPart:"chooseFileButton",compProps:{align:"center"},onClick:function(){a.click()}};return this.createChildComponent(b,"wysiwyg.viewer.components.SiteButton","siteButton",c)},getSkinProperties:function(){var a=this.createChooseFileButton(this.refs.fileInput);return{"":{},chooseFileButton:{children:[a]},fileInput:{onChange:function(){var a=this.refs.fileInput.files[0];if(this.refs.fileName){this.refs.fileName.innerText=a.name}e.upload(a,this.props.siteMediaToken)}.bind(this)}}}}});